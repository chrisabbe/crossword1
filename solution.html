<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Daily Crossword - Solution</title>
<style>
:root{
  --teal:#1f9dbf;--gold:#f5b041;--gray:#ddd;--bg:#fafafa;
}
body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:var(--bg);color:#222;}
.wrapper{max-width:950px;margin:auto;padding:12px;text-align:center;}
h1{color:var(--teal);margin:.3em 0 .1em;font-size:1.8em;}
h2{color:#555;font-size:1.1em;margin:0 0 .8em;font-weight:normal;}
.grid-area{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-bottom:30px;
}
.grid{
  display:grid;gap:2px;
  grid-template-columns:repeat(15, minmax(20px,1fr));
  max-width:95vw;
  background:var(--gray);
  border:2px solid var(--gray);
}
.cell{
  position:relative;
  background:white;
  aspect-ratio:1/1;
  border:1px solid var(--gray);
  font-weight:bold;
  text-transform:uppercase;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:clamp(12px,3vw,20px);
}
.cell.black{background:var(--gold);}
.num{
  position:absolute;top:2px;left:3px;
  font-size:clamp(7px,1.5vw,11px);color:#444;
}
.clues{display:flex;flex-wrap:wrap;gap:20px;justify-content:center;text-align:left;margin-top:14px;}
.clues div{flex:1 1 300px;max-width:420px;}
.clues h3{color:var(--teal);margin-bottom:6px;}
.clues ul{padding-left:20px;margin:0;}
.clues li{margin-bottom:5px;}
@media(max-width:600px){
  .grid{grid-template-columns:repeat(15, minmax(16px,1fr));gap:1px;}
  .cell{font-size:clamp(10px,3vw,16px);}
}
</style>
</head>
<body>
<div class="wrapper">
  <h1>Daily Crossword - Solution</h1>
  <h2 id="subtitle"></h2>
  <p style="font-style:italic;color:#666;margin-top:-4px;">Here’s the completed crossword from yesterday’s puzzle.</p>
  <div class="grid-area">
    <div id="grid" class="grid"></div>
  </div>
  <div id="clues" class="clues"></div>
</div>

<script>
const puzzleURL = "./puzzle.json"; // same file as puzzle
const gridEl = document.getElementById('grid');
const cluesEl = document.getElementById('clues');

fetch(puzzleURL)
.then(r=>r.json())
.then(data=>{
  document.getElementById('subtitle').textContent = data.subtitle || "";
  const {rows,cols,grid,numbers,across,down}=data;
  gridEl.style.gridTemplateColumns=`repeat(${cols},1fr)`;
  gridEl.innerHTML="";
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      const cell=document.createElement("div");
      cell.className="cell";
      if(grid[r][c]==="#"){cell.classList.add("black");gridEl.appendChild(cell);continue;}
      const num=numbers[r][c];
      if(num){const n=document.createElement("div");n.className="num";n.textContent=num;cell.appendChild(n);}
      // show solution letter if available
      const letter = (data.solution && data.solution[r] && data.solution[r][c]) 
                     ? data.solution[r][c] 
                     : (grid[r][c] || "");
      cell.textContent = letter.toUpperCase();
      gridEl.appendChild(cell);
    }
  }
  // Clues
  let html="";
  html += `<div><h3>Across</h3><ul>`;
  for(const [n,txt] of Object.entries(across||{})){html+=`<li><b>${n}.</b> ${txt}</li>`;}
  html += `</ul></div><div><h3>Down</h3><ul>`;
  for(const [n,txt] of Object.entries(down||{})){html+=`<li><b>${n}.</b> ${txt}</li>`;}
  html += `</ul></div>`;
  cluesEl.innerHTML=html;
})
.catch(err=>{
  gridEl.innerHTML="<p style='color:red'>Solution Unavailable</p>";
});
</script>
</body>
</html>
