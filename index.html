<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Daily Crossword</title>
<style>
:root{
  --teal:#1f9dbf;--gold:#f5b041;--gray:#ddd;--bg:#fafafa;--shade:#f8f5ef;
}
body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:var(--bg);color:#222;}
.wrapper{max-width:900px;margin:0 auto;padding:12px;text-align:center;}
h1{color:var(--teal);margin:.3em 0 .1em;font-size:1.8em;}
h2{color:#555;font-size:1.1em;margin:0 0 .8em;font-weight:normal;}
.grid{display:grid;gap:1px;justify-content:center;margin:auto;}
.cell{
  width:calc(100% / 15 - 1px);
  aspect-ratio:1/1;
  background:white;
  border:1px solid var(--gray);
  position:relative;
  font-weight:bold;
  font-size:1.2em;
  text-transform:uppercase;
}
.cell.black{background:var(--gold);border:1px solid var(--gold);}
.cell input{
  width:100%;height:100%;border:none;text-align:center;
  font-size:1em;font-weight:bold;text-transform:uppercase;
  background:transparent;outline:none;
}
.num{position:absolute;top:2px;left:3px;font-size:.55em;color:#444;}
.controls{margin:12px 0;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;}
button{border:0;padding:10px 16px;border-radius:10px;font-weight:bold;cursor:pointer;}
.btn-clear{background:var(--gold);color:#222;}
.toast{
  position:fixed;bottom:20px;left:50%;transform:translateX(-50%);
  background:var(--teal);color:#fff;padding:8px 14px;border-radius:8px;
  opacity:0;transition:opacity .3s ease;z-index:999;
}
.toast.show{opacity:1;}
@media(max-width:600px){
  .grid{width:98vw;max-width:480px;}
  .cell input{font-size:.95em;}
}
</style>
</head>
<body>
<div class="wrapper">
  <h1 id="title">Daily Crossword</h1>
  <h2 id="subtitle"></h2>
  <p style="font-style:italic;color:#666;margin-top:-4px;">Tap to fill in the squares. Progress saves automatically.</p>
  <div id="grid" class="grid"></div>
  <div class="controls">
    <button class="btn-clear" id="clearBtn">Clear My Answers</button>
  </div>
</div>
<div id="toast" class="toast">Progress Saved</div>

<script>
const puzzleURL = "./puzzle.json";  // âœ… Your local file
const gridEl = document.getElementById('grid');
const titleEl = document.getElementById('title');
const subEl = document.getElementById('subtitle');
const toast = document.getElementById('toast');
const LS_KEY = "crossword-progress";

fetch(puzzleURL).then(r=>r.json()).then(data=>{
  titleEl.textContent = data.title;
  subEl.textContent = data.subtitle||"";
  const {rows,cols,grid,numbers}=data;
  gridEl.style.gridTemplateColumns=`repeat(${cols},1fr)`;
  gridEl.innerHTML="";
  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      const cell=document.createElement("div");
      cell.className="cell";
      if(grid[r][c]==="#"){cell.classList.add("black");gridEl.appendChild(cell);continue;}
      const num=numbers[r][c];
      if(num){const n=document.createElement("div");n.className="num";n.textContent=num;cell.appendChild(n);}
      const inp=document.createElement("input");
      inp.maxLength=1;
      const key=`${r}-${c}`;
      inp.value=loadProgress()[key]||"";
      inp.addEventListener("input",()=>{saveProgress(key,inp.value.toUpperCase());showToast("Progress Saved");});
      cell.appendChild(inp);
      gridEl.appendChild(cell);
    }
  }
}).catch(err=>{
  gridEl.innerHTML="<p style='color:red'>Crossword Unavailable</p>";
});

function showToast(msg){
  toast.textContent=msg;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),1000);
}
function loadProgress(){
  try{return JSON.parse(localStorage.getItem(LS_KEY)||"{}");}catch(e){return {};}
}
function saveProgress(key,val){
  const data=loadProgress();
  data[key]=val;
  localStorage.setItem(LS_KEY,JSON.stringify(data));
}
document.getElementById("clearBtn").onclick=()=>{
  if(confirm("Clear all answers?")){
    localStorage.removeItem(LS_KEY);
    document.querySelectorAll(".cell input").forEach(i=>i.value="");
  }
};
</script>
</body>
</html>
