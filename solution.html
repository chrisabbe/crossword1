<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Daily Crossword - Solution</title>
<style>
:root{
  --teal:#1f9dbf;
  --gold:#f5b041;      /* match puzzle gold */
  --gray:#ddd;
  --bg:#fafafa;
  --shade:#f8f5ef;
}
body{
  font-family:Arial,Helvetica,sans-serif;
  margin:0;
  padding:0;
  background:var(--bg);
  color:#222;
}
.wrapper{
  max-width:950px;
  margin:auto;
  padding:12px;
  text-align:center;
}
h1{
  color:var(--teal);
  margin:.3em 0 .1em;
  font-size:1.8em;
}
h2{
  color:#555;
  font-size:1.1em;
  margin:0 0 .8em;
  font-weight:normal;
}
p.instructions{
  font-style:italic;
  color:#666;
  margin-top:-4px;
}
.grid-area{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding-bottom:30px;
}
.grid{
  display:grid;
  gap:2px;
  grid-template-columns:repeat(15, minmax(20px,1fr));
  max-width:95vw;
  background:var(--gray);
  border:2px solid var(--gray);
}
.cell{
  position:relative;
  background:white;
  aspect-ratio:1/1;
  border:1px solid var(--gray);
  font-weight:bold;
  text-transform:uppercase;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:clamp(12px,3vw,20px);
}
.cell.black{
  background:var(--gold);   /* same gold as puzzle */
}
.num{
  position:absolute;
  top:2px;
  left:3px;
  font-size:clamp(7px,1.5vw,11px);
  color:#444;
}
.clues{
  display:flex;
  flex-wrap:wrap;
  gap:20px;
  justify-content:center;
  text-align:left;
  margin-top:14px;
}
.clues-section{
  flex:1 1 300px;
  max-width:420px;
}
.clues-header{
  background:var(--teal);
  color:#fff;
  padding:6px 10px;
  border-radius:6px;
  font-weight:bold;
  margin:0 0 6px;
  font-size:.95rem;
  text-transform:uppercase;
  letter-spacing:.03em;
}
.clues ul{
  padding-left:20px;
  margin:0;
}
.clues li{
  margin-bottom:5px;
}
@media(max-width:600px){
  .grid{
    grid-template-columns:repeat(15, minmax(16px,1fr));
    gap:1px;
  }
  .cell{
    font-size:clamp(10px,3vw,16px);
  }
}
</style>
</head>
<body>
<div class="wrapper">
  <h1>Daily Crossword - Solution</h1>
  <h2 id="subtitle"></h2>
  <p class="instructions">Here’s the completed crossword from yesterday’s puzzle.</p>

  <div class="grid-area">
    <div id="grid" class="grid"></div>
  </div>

  <div id="clues" class="clues"></div>
</div>

<script>
const puzzleURL = "./puzzle.json"; // same folder as this file
const gridEl   = document.getElementById('grid');
const cluesEl  = document.getElementById('clues');
const subtitleEl = document.getElementById('subtitle');

fetch(puzzleURL)
  .then(r => r.json())
  .then(data => {
    const rows = data.rows;
    const cols = data.cols;
    const grid = data.grid;
    const numbers = data.numbers || [];
    const across = data.across || {};
    const down   = data.down   || {};
    const solutionGrid = data.solution || grid; // fallback if solution not yet filled

    subtitleEl.textContent = data.subtitle || "";

    // Build grid
    gridEl.style.gridTemplateColumns = `repeat(${cols},1fr)`;
    gridEl.innerHTML = "";

    for(let r=0; r<rows; r++){
      for(let c=0; c<cols; c++){
        const cell = document.createElement("div");
        cell.className = "cell";

        const isBlock = grid[r] && grid[r][c] === "#";
        if(isBlock){
          cell.classList.add("black");
          gridEl.appendChild(cell);
          continue;
        }

        // clue number overlay
        const numVal = numbers[r] && numbers[r][c] ? numbers[r][c] : 0;
        if(numVal){
          const num = document.createElement("div");
          num.className = "num";
          num.textContent = numVal;
          cell.appendChild(num);
        }

        // solution letter
        let letter = "";
        if(solutionGrid && solutionGrid[r] && solutionGrid[r][c] && solutionGrid[r][c] !== "#"){
          letter = String(solutionGrid[r][c]).toUpperCase();
        }
        cell.appendChild(document.createTextNode(letter));

        gridEl.appendChild(cell);
      }
    }

    // Build clues with teal bar headers (Option C)
    let html = "";

    html += `<div class="clues-section"><div class="clues-header">Across</div><ul>`;
    for(const [n, txt] of Object.entries(across)){
      html += `<li><b>${n}.</b> ${txt}</li>`;
    }
    html += `</ul></div>`;

    html += `<div class="clues-section"><div class="clues-header">Down</div><ul>`;
    for(const [n, txt] of Object.entries(down)){
      html += `<li><b>${n}.</b> ${txt}</li>`;
    }
    html += `</ul></div>`;

    cluesEl.innerHTML = html;
  })
  .catch(err => {
    console.error("Error loading puzzle.json for solution:", err);
    gridEl.innerHTML = "<p style='color:red'>Solution unavailable.</p>";
  });
</script>
</body>
</html>
